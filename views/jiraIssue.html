<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title></title>
    <link href="/css/mobile-form.css" rel="stylesheet" type="text/css" />
    <!-- bootstrap css --->
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
</head>
<body>
    <header>
        <h2>Wassan</h2>
        <span>Project Management</span>
    </header>
    <div class="content">
        <h2>Create Task / Issues</h2>
        <form method="post" id="form-create-task" class="form-create-task">
            <div class="container-fluid">
                <div class="form-group">
                    <select required id="ap-issuetype" name="ap-issuetype" class="form-control" >
                        <option value="">Issue Type</option>
                        <option value="10002">Member On-boarding</option>
                        <option value="10003">Seed Distribution</option>
                    </select>
                </div>
                <div class="form-group">
                    <input class="form-control" type="text" id="ap-summary" name="ap-summary" placeholder="Summary" required/>
                </div>
                <div class="form-group">
                    <input class="form-control" type="text" id="ap-name" name="ap-name" placeholder="Name" required/>
                </div>

                <div class="form-group">
                    <select required id="ap-district" name="ap-district" class="form-control">
                        <option value="">District</option>
                        {{#indexData.districts}}
                        <option value="{{districts}}">{{districts}}</option>
                        {{/indexData.districts}}
                    </select>
                </div>
                <div class="form-group">
                    <select required id="ap-taluk" name="ap-taluk" class="form-control">
                        <option value="">Taluk</option>
                        {{#indexData.taluks}}
                        <option value="{{taluks}}">{{taluks}}</option>
                        {{/indexData.taluks}}
                    </select>
                </div>
                <div class="form-group">
                    <select required id="ap-seed-name" name="ap-seed-name" class="form-control">
                        <option value="">Seed Name</option>
                        <option value="Wheat">Wheat</option>
                        <option value="Rice">Rice</option>
                        <option value="Barley">Barley</option>
                    </select>
                </div>
                <div class="form-group">
                    <input class="form-control" type="text" id="ap-seed-qty" name="seed-qty" placeholder="Seed Quantity" required/>
                </div>

                <div class="form-group">
                    <input class="form-control" type="text" id="ap-acres" name="ap-acres" placeholder="No. of Acres" required/>
                </div>

                <div class="form-group">
                    <label id="success-msg"></label>
                    <label id="warning-msg"></label>
                    <label id="error-msg"></label>
                    <button id="btn-create-task" name="btn-create-task">Create Issue</button>
                </div>
            </div>

        </form>
    </div>


</body>
<!--<link rel="stylesheet" href="/css/chosen.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="/js/chosen.jquery.min.js" type="text/javascript"></script>-->
</html>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        /*$(".chosen-select").chosen({width: "100%", disable_search: true});*/
    });
    $('#form-create-task').on('click', '#btn-create-task',  function (e) {
        e.preventDefault();
        if(reqValidation()){
            $.post('/CreateIssue', $('#form-create-task').serialize())
                    .done(function (result) {
                        if(result.success) {
                            $("#success-msg").text("Issue Created Successfully");
                            $("#warning-msg").text("");
                            $("#error-msg").text("");
                            document.getElementById("form-create-task").reset();
                        } else {
                            $("#error-msg").text("Error: Issue Creation Failed");
                            $("#warning-msg").text("");
                            $("#success-msg").text("");
                        }
                    });
        } else {
            $("#warning-msg").text("** Please fill all the fields");
            $("#success-msg").text("");
            $("#error-msg").text("");
        }

    });
    function reqValidation() {
        var check = true;
        var _issuetype = mapValidate('#ap-issuetype');
        var _summary = mapValidate('#ap-summary');
        var _name = mapValidate('#ap-name');
        var _district = mapValidate('#ap-district');
        var _taluk = mapValidate('#ap-taluk');
        var _seedName = mapValidate('#ap-seed-name');
        var _seedQty = mapValidate('#ap-seed-qty');
        var _acres = mapValidate('#ap-acres');
        if(_issuetype&&_summary&&_name&&_district&&_taluk&&_seedName&&_seedQty&&_acres) {
            check = true;
        } else {
            check = false;
        }
        return check;
    }



    function mapValidate(elem) {
        var check = true;
        $(elem).val($.trim($(elem).val()));

        if (!$(elem).val()) {
            check = false;
        } else {
            check = true;
        }
        return check;
    }

//    function mapNumValidate(elem) {
//        var check = true;
//        $(elem).val($.trim($(elem).val()));
//
//        if (!$(elem).val() || isNaN($(elem).val()) || $(elem).val() < 1) {
//            check = false;
//        } else {
//        }
//        return check;
//    }
</script>